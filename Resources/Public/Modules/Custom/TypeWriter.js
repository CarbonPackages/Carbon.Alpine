import{a as t}from"../chunk-O2XFH626.js";var u="0.05em",c={cursor:"position:relative",cursorSpan:`position:absolute;top:${u};bottom:${u};border-left:${u} solid currentColor`,placeholder:"display:inline-block;position:relative;height:1em"},m=class{constructor(e,r,s,a,o=!1){t(this,"element");t(this,"texts");t(this,"current");t(this,"currentText");t(this,"waitTime");t(this,"showCursor");t(this,"cursor");t(this,"segment");t(this,"segmentPointer");t(this,"useCssClasses");this.element=e,this.texts=r||[],this.current=1,this.currentText="",this.waitTime=s||2e3,this.showCursor=a||!1,this.cursor=!0,this.segment=[],this.segmentPointer=0,this.useCssClasses=o}async start(){if(this.currentText=this.texts[0]||"",this.segment=this.segmentString(this.currentText),this.segmentPointer=this.segment.length,this.element.innerHTML=this.prepareText(!0),!window.matchMedia("(prefers-reduced-motion: reduce)").matches)for(this.increment();;)await this.swap()}prepareText(e){return`${this.currentText}${e?this.getCursor():""}${this.getPlaceholder()}`}getCursor(){return this.showCursor?this.useCssClasses?'<span class="typewriter-cursor"><span></span></span>':`<span style="${c.cursor}"><span style="${c.cursorSpan}"></span></span>`:""}getPlaceholder(){return this.useCssClasses?'<span class="typewriter-placeholder"></span>':`<span style="${c.placeholder}"></span>`}async swap(){await this.wait(this.waitTime),await this.clear(),await this.type(this.nextText())}increment(){this.current++,this.current>this.texts.length&&(this.current=1)}nextText(){let e=this.texts[this.current-1];return this.increment(),e}segmentString(e){return(typeof Intl<"u"&&Intl.Segmenter?[...new Intl.Segmenter().segment(e)]:e.split("").map(s=>({segment:s}))).reduce((s,{segment:a},o)=>[...s,s[o]+a],[""])}backspace(){return this.currentText=this.segment[this.segmentPointer],this.element.innerHTML=this.prepareText(!0),this.wait(100)}async clear(){for(;this.segmentPointer>0;)this.segmentPointer--,await this.backspace()}async type(e){for(this.segment=this.segmentString(e),this.segmentPointer=0;this.segmentPointer<this.segment.length;)await this.append(),this.segmentPointer++}append(){return this.currentText=this.segment[this.segmentPointer],this.element.innerHTML=this.prepareText(!0),this.wait(100)}async wait(e){this.cursor=!0;let r=setInterval(()=>{this.cursor=!this.cursor,this.cursor?this.element.innerHTML=this.prepareText(!0):this.element.innerHTML=this.prepareText(!1)},530);return new Promise(s=>{setTimeout(()=>{clearInterval(r),s(void 0)},e)})}};function g(n){if(n&&typeof n=="object"&&n.magic&&n.directive)return p(n,{useCssClasses:!1});{let e=n||{useCssClasses:!1};return function(r){return p(r,e)}}}function p(n,e){n.directive("typewriter",(r,{expression:s,modifiers:a},{evaluate:o})=>{let d=o(s),h=a.filter(i=>i.match(/^\d+m?s$/)).pop(),l=null;if(h)if(h.endsWith("ms")){let i=h.match(/^(\d+)/);l=i?parseInt(i[1]):null}else{let i=h.match(/^(\d+)s/);l=i?parseInt(i[1])*1e3:null}let w=a.includes("cursor");new m(r,d,l,w,e.useCssClasses).start().then()})}window.addEventListener("alpine:init",()=>{window.Alpine.plugin(g)});
