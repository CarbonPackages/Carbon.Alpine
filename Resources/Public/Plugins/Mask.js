(()=>{function w(i){i.directive("mask",(t,{value:e,expression:o},{effect:f,evaluateLater:s})=>{let n=()=>o,u="";if(["function","dynamic"].includes(e)){let r=s(o);f(()=>{n=c=>{let d;return i.dontAutoEvaluateFunctions(()=>{r(a=>{d=typeof a=="function"?a(c):a},{scope:{$input:c,$money:k.bind({el:t})}})}),d},l(t)})}else l(t);t.addEventListener("input",()=>l(t)),t.addEventListener("blur",()=>l(t,!1));function l(r,c=!0){let d=r.value,a=n(d);if(!a||a==="false")return!1;if(u.length-r.value.length===1)return u=r.value;let g=()=>{u=r.value=p(d,a)};c?I(r,a,()=>{g()}):g()}function p(r,c){if(r==="")return"";let d=h(c,r);return v(c,d)}})}function I(i,t,e){let o=i.selectionStart,f=i.value;e();let s=f.slice(0,o),n=v(t,h(t,s)).length;i.setSelectionRange(n,n)}function h(i,t){let e=t,o="",f={9:/[0-9]/,a:/[a-zA-Z]/,"*":/[a-zA-Z0-9]/},s="";for(let n=0;n<i.length;n++){if(["9","a","*"].includes(i[n])){s+=i[n];continue}for(let u=0;u<e.length;u++)if(e[u]===i[n]){e=e.slice(0,u)+e.slice(u+1);break}}for(let n=0;n<s.length;n++){let u=!1;for(let l=0;l<e.length;l++)if(f[s[n]].test(e[l])){o+=e[l],e=e.slice(0,l)+e.slice(l+1),u=!0;break}if(!u)break}return o}function v(i,t){let e=Array.from(t),o="";for(let f=0;f<i.length;f++){if(!["9","a","*"].includes(i[f])){o+=i[f];continue}if(e.length===0)break;o+=e.shift()}return o}function k(i,t=".",e){e=t===","&&e===void 0?".":",";let o=(n,u)=>{let l="",p=0;for(let r=n.length-1;r>=0;r--)n[r]!==u&&(p===3?(l=n[r]+u+l,p=0):l=n[r]+l,p++);return l},f=i.replaceAll(new RegExp(`[^0-9\\${t}]`,"g"),""),s=Array.from({length:f.split(t)[0].length}).fill("9").join("");return s=o(s,e),i.includes(t)&&(s+=`${t}99`),queueMicrotask(()=>{this.el.value.endsWith(t)||this.el.value[this.el.selectionStart-1]===t&&this.el.setSelectionRange(this.el.selectionStart-1,this.el.selectionStart-1)}),s}var b=w;window.addEventListener("alpine:init",()=>{window.Alpine.plugin(b)});})();
