(()=>{function w(l){l.directive("mask",(e,{value:t,expression:o},{effect:f,evaluateLater:s})=>{let n=()=>o,u="";if(["function","dynamic"].includes(t)){let i=s(o);f(()=>{n=c=>{let d;return l.dontAutoEvaluateFunctions(()=>{i(a=>{d=typeof a=="function"?a(c):a},{scope:{$input:c,$money:k.bind({el:e})}})}),d},r(e)})}else r(e);e.addEventListener("input",()=>r(e)),e.addEventListener("blur",()=>r(e,!1));function r(i,c=!0){let d=i.value,a=n(d);if(!a||a==="false")return!1;if(u.length-i.value.length===1)return u=i.value;let g=()=>{u=i.value=p(d,a)};c?I(i,a,()=>{g()}):g()}function p(i,c){if(i==="")return"";let d=h(c,i);return v(c,d)}})}function I(l,e,t){let o=l.selectionStart,f=l.value;t();let s=f.slice(0,o),n=v(e,h(e,s)).length;l.setSelectionRange(n,n)}function h(l,e){let t=e,o="",f={9:/[0-9]/,a:/[a-zA-Z]/,"*":/[a-zA-Z0-9]/},s="";for(let n=0;n<l.length;n++){if(["9","a","*"].includes(l[n])){s+=l[n];continue}for(let u=0;u<t.length;u++)if(t[u]===l[n]){t=t.slice(0,u)+t.slice(u+1);break}}for(let n=0;n<s.length;n++){let u=!1;for(let r=0;r<t.length;r++)if(f[s[n]].test(t[r])){o+=t[r],t=t.slice(0,r)+t.slice(r+1),u=!0;break}if(!u)break}return o}function v(l,e){let t=Array.from(e),o="";for(let f=0;f<l.length;f++){if(!["9","a","*"].includes(l[f])){o+=l[f];continue}if(t.length===0)break;o+=t.shift()}return o}function k(l,e=".",t){if(/^\D+$/.test(l))return"9";t=t??(e===","?".":",");let o=(n,u)=>{let r="",p=0;for(let i=n.length-1;i>=0;i--)n[i]!==u&&(p===3?(r=n[i]+u+r,p=0):r=n[i]+r,p++);return r},f=l.replaceAll(new RegExp(`[^0-9\\${e}]`,"g"),""),s=Array.from({length:f.split(e)[0].length}).fill("9").join("");return s=o(s,t),l.includes(e)&&(s+=`${e}99`),queueMicrotask(()=>{this.el.value.endsWith(e)||this.el.value[this.el.selectionStart-1]===e&&this.el.setSelectionRange(this.el.selectionStart-1,this.el.selectionStart-1)}),s}var b=w;window.addEventListener("alpine:init",()=>{window.Alpine.plugin(b)});})();
