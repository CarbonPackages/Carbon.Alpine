(()=>{var f=Object.defineProperty;var T=(t,e,s)=>e in t?f(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var n=(t,e,s)=>T(t,typeof e!="symbol"?e+"":e,s);var u="0.05em",c={cursor:"position:relative",cursorSpan:`position:absolute;top:${u};bottom:${u};border-left:${u} solid currentColor`,placeholder:"display:inline-block;position:relative;height:1em"},m=class{constructor(e,s,r,a,o=!1){n(this,"element");n(this,"texts");n(this,"current");n(this,"currentText");n(this,"waitTime");n(this,"showCursor");n(this,"cursor");n(this,"segment");n(this,"segmentPointer");n(this,"useCssClasses");this.element=e,this.texts=s||[],this.current=1,this.currentText="",this.waitTime=r||2e3,this.showCursor=a||!1,this.cursor=!0,this.segment=[],this.segmentPointer=0,this.useCssClasses=o}async start(){if(this.currentText=this.texts[0]||"",this.segment=this.segmentString(this.currentText),this.segmentPointer=this.segment.length,this.element.innerHTML=this.prepareText(!0),!window.matchMedia("(prefers-reduced-motion: reduce)").matches)for(this.increment();;)await this.swap()}prepareText(e){return`${this.currentText}${e?this.getCursor():""}${this.getPlaceholder()}`}getCursor(){return this.showCursor?this.useCssClasses?'<span class="typewriter-cursor"><span></span></span>':`<span style="${c.cursor}"><span style="${c.cursorSpan}"></span></span>`:""}getPlaceholder(){return this.useCssClasses?'<span class="typewriter-placeholder"></span>':`<span style="${c.placeholder}"></span>`}async swap(){await this.wait(this.waitTime),await this.clear(),await this.type(this.nextText())}increment(){this.current++,this.current>this.texts.length&&(this.current=1)}nextText(){let e=this.texts[this.current-1];return this.increment(),e}segmentString(e){return(typeof Intl<"u"&&Intl.Segmenter?[...new Intl.Segmenter().segment(e)]:e.split("").map(r=>({segment:r}))).reduce((r,{segment:a},o)=>[...r,r[o]+a],[""])}backspace(){return this.currentText=this.segment[this.segmentPointer],this.element.innerHTML=this.prepareText(!0),this.wait(100)}async clear(){for(;this.segmentPointer>0;)this.segmentPointer--,await this.backspace()}async type(e){for(this.segment=this.segmentString(e),this.segmentPointer=0;this.segmentPointer<this.segment.length;)await this.append(),this.segmentPointer++}append(){return this.currentText=this.segment[this.segmentPointer],this.element.innerHTML=this.prepareText(!0),this.wait(100)}async wait(e){this.cursor=!0;let s=setInterval(()=>{this.cursor=!this.cursor,this.cursor?this.element.innerHTML=this.prepareText(!0):this.element.innerHTML=this.prepareText(!1)},530);return new Promise(r=>{setTimeout(()=>{clearInterval(s),r(void 0)},e)})}};function g(t){if(t&&typeof t=="object"&&t.magic&&t.directive)return p(t,{useCssClasses:!1});{let e=t||{useCssClasses:!1};return function(s){return p(s,e)}}}function p(t,e){t.directive("typewriter",(s,{expression:r,modifiers:a},{evaluate:o})=>{let d=o(r),h=a.filter(i=>i.match(/^\d+m?s$/)).pop(),l=null;if(h)if(h.endsWith("ms")){let i=h.match(/^(\d+)/);l=i?parseInt(i[1]):null}else{let i=h.match(/^(\d+)s/);l=i?parseInt(i[1])*1e3:null}let w=a.includes("cursor");new m(s,d,l,w,e.useCssClasses).start().then()})}window.addEventListener("alpine:init",()=>{window.Alpine.plugin(g)});})();
